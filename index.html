<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cyber Defender ‚Äî –ö–∏–±–µ—Ä–±—É–ª–ª–∏–Ω–≥–∫–µ “õ–∞—Ä—Å—ã —Ç—Ä–µ–Ω–∞–∂—ë—Ä</title>
  <style>
    :root {
      --bg1: #4c9be8;
      --bg2: #d8ebff;
      --card: #ffffff;
      --text: #1f2937;
      --accent: #2563eb;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }
    body {
      font-family: system-ui, Arial, sans-serif;
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      color: #fff;
      display: flex; align-items: center; justify-content: center;
    }
    .container { width: min(900px, 100%); padding: 16px; }
    header { text-align: center; margin-bottom: 12px; }
    header h1 { margin: 8px 0 4px; text-shadow: 0 1px 8px rgba(0,0,0,.25); }
    header p { margin: 0; opacity: .9; }
    .lang-buttons { margin-top: 8px; }
    .lang-btn { background: #fff; color: #111; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; margin: 0 4px; font-weight: 600; }
    .lang-btn:hover { background: #ddd; }

    .panel { display: flex; gap: 8px; justify-content: space-between; align-items: center; margin: 10px 0 6px; flex-wrap: wrap; }
    .pill { background: rgba(255,255,255,.18); border: 1px solid rgba(255,255,255,.25); backdrop-filter: blur(6px); padding: 8px 12px; border-radius: 999px; font-weight: 600; }
    .btn { cursor: pointer; background: var(--accent); border: none; color: #fff; font-weight: 700; padding: 10px 16px; border-radius: 10px; box-shadow: 0 6px 16px rgba(37,99,235,.35); }
    .btn:active { transform: translateY(1px); }

    #stage { position: relative; height: 540px; overflow: hidden; border-radius: 14px; background: linear-gradient(180deg, rgba(255,255,255,.25), rgba(255,255,255,.05)); border: 1px solid rgba(255,255,255,.35); box-shadow: 0 20px 60px rgba(0,0,0,.25); }

    .msg { position: absolute; left: 0; top: -60px; padding: 10px 14px; border-radius: 14px; background: var(--card); color: var(--text); box-shadow: 0 8px 24px rgba(0,0,0,.15); user-select: none; cursor: pointer; animation: fall linear forwards; }

    @keyframes fall { from { transform: translateY(-80px); opacity: .95; } to { transform: translateY(900px); opacity: .9; } }

    .overlay { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,.35); backdrop-filter: blur(4px); }
    .card { width: min(560px, 92%); background: #fff; color: #111827; border-radius: 16px; padding: 20px; text-align: center; box-shadow: 0 25px 80px rgba(0,0,0,.35); }
    .card h2 { margin: 6px 0 10px; }
    .grid { display: grid; gap: 10px; }
    .muted { color: #6b7280; }
    .row { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
    footer { margin-top: 10px; font-size: 14px; opacity: .9; text-align: center; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üõ°Ô∏è Cyber Defender</h1>
      <p id="description">–ë“±–ª –æ–π—ã–Ω –∞—Ä“õ—ã–ª—ã —Å–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—Ç–µ–≥—ñ –¥”©—Ä–µ–∫—ñ —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä–¥—ã —Ç–∞–Ω—É“ì–∞ “Ø–π—Ä–µ–Ω–µ—Å—ñ“£.</p>
      <div class="lang-buttons">
        <button class="lang-btn" onclick="setLang('kk')">“ö–∞–∑–∞“õ—à–∞</button>
        <button class="lang-btn" onclick="setLang('ru')">–†—É—Å—Å–∫–∏–π</button>
      </div>
    </header>

    <div class="panel">
      <div class="row">
        <div id="score" class="pill">“∞–ø–∞–π: 0</div>
        <div id="lives" class="pill">”®–º—ñ—Ä: 5</div>
        <div id="level" class="pill">–î–µ“£–≥–µ–π: 1</div>
        <div id="best" class="pill">–†–µ–∫–æ—Ä–¥: 0</div>
      </div>
      <div class="row">
        <button id="btnPause" class="btn">“Æ–∑—ñ–ª—ñ—Å ‚è∏</button>
        <button id="btnRestart" class="btn">“ö–∞–π—Ç–∞ –æ–π–Ω–∞—É üîÅ</button>
      </div>
    </div>

    <div id="stage">
      <div id="startOverlay" class="overlay">
        <div class="card grid">
          <h2 id="startTitle">–ë–∞—Å—Ç–∞—É“ì–∞ –¥–∞–π—ã–Ω—Å—ã“£ –±–∞?</h2>
          <p id="startText" class="muted">–ú–∞“õ—Å–∞—Ç ‚Äì –¥”©—Ä–µ–∫—ñ –∂”ô–Ω–µ “õ–æ—Ä–ª–∞–π—Ç—ã–Ω —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä–¥—ã –±–∞—Å—É, –∞–ª –∂–∞“õ—Å—ã—Å—ã–Ω “õ–∞–ª–¥—ã—Ä—É.</p>
          <div class="row">
            <button id="btnStart" class="btn">–û–π—ã–Ω–¥—ã –±–∞—Å—Ç–∞—É ‚ñ∂</button>
          </div>
        </div>
      </div>
      <div id="endOverlay" class="overlay" style="display:none">
        <div class="card grid">
          <h2 id="endTitle">–û–π—ã–Ω –∞—è“õ—Ç–∞–ª–¥—ã</h2>
          <div id="summary"></div>
          <div class="row">
            <button id="btnAgain" class="btn">“ö–∞–π—Ç–∞ –æ–π–Ω–∞—É üîÅ</button>
          </div>
        </div>
      </div>
    </div>

    <footer>–ñ–æ–±–∞ GitHub Pages –∞—Ä“õ—ã–ª—ã “õ–æ–ª–∂–µ—Ç—ñ–º–¥—ñ. –ö–∏–±–µ—Ä“õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫–∫–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω –æ“õ—É –æ–π—ã–Ω—ã.</footer>
  </div>

  <audio id="clickSound" src="click.mp3"></audio>
  <audio id="wrongSound" src="wrong.mp3"></audio>
  <audio id="bgMusic" src="music.mp3" loop autoplay></audio>

  <script>
    const translations = {
      kk: {
        description: '–ë“±–ª –æ–π—ã–Ω –∞—Ä“õ—ã–ª—ã —Å–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—Ç–µ–≥—ñ –¥”©—Ä–µ–∫—ñ —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä–¥—ã —Ç–∞–Ω—É“ì–∞ “Ø–π—Ä–µ–Ω–µ—Å—ñ“£.',
        startTitle: '–ë–∞—Å—Ç–∞—É“ì–∞ –¥–∞–π—ã–Ω—Å—ã“£ –±–∞?', startText: '–ú–∞“õ—Å–∞—Ç ‚Äì –¥”©—Ä–µ–∫—ñ –∂”ô–Ω–µ “õ–æ—Ä–ª–∞–π—Ç—ã–Ω —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä–¥—ã –±–∞—Å—É, –∞–ª –∂–∞“õ—Å—ã—Å—ã–Ω “õ–∞–ª–¥—ã—Ä—É.', endTitle: '–û–π—ã–Ω –∞—è“õ—Ç–∞–ª–¥—ã',
        startButton: '–û–π—ã–Ω–¥—ã –±–∞—Å—Ç–∞—É ‚ñ∂', restart: '“ö–∞–π—Ç–∞ –æ–π–Ω–∞—É üîÅ', pause: '“Æ–∑—ñ–ª—ñ—Å ‚è∏', score: '“∞–ø–∞–π', lives: '”®–º—ñ—Ä', level: '–î–µ“£–≥–µ–π', best: '–†–µ–∫–æ—Ä–¥',
        pool: [
          { text: '–°–µ–Ω ”©—Ç–µ –∂–∞“õ—Å—ã –¥–æ—Å—Å—ã“£', bad: false },
          { text: '–ñ–∞—Ä–∞–π—Å—ã“£', bad: false },
          { text: '–ö”©–º–µ–≥—ñ“£ “Ø—à—ñ–Ω —Ä–∞“õ–º–µ—Ç', bad: false },
          { text: '”®–º—ñ—Ä–¥–µ –±”ô—Ä—ñ –∂–∞“õ—Å—ã –±–æ–ª–∞–¥—ã', bad: false },
          { text: '–°–µ–Ω –∞“õ—ã–º–∞“õ—Å—ã“£', bad: true },
          { text: '–ï—à–∫—ñ–º–≥–µ –∫–µ—Ä–µ–∫—Å—ñ–∑—Å—ñ“£', bad: true },
          { text: '–ê–∫–∫–∞—É–Ω—Ç—ã“£–¥—ã ”©—à—ñ—Ä', bad: true },
          { text: '–°–µ–Ω—ñ“£ —Å—É—Ä–µ—Ç—ñ“£ “õ–æ—Ä“õ—ã–Ω—ã—à—Ç—ã', bad: true },
          { text: '–°–µ–Ω—ñ“£ –ø—ñ–∫—ñ—Ä—ñ“£ –º–∞“ì–∞–Ω “±–Ω–∞–π–¥—ã', bad: false },
          { text: '–°–µ–Ω –º—ã“õ—Ç—ã—Å—ã“£', bad: false },
          { text: '–°–∞“ì–∞–Ω –µ—à–∫—ñ–º —Å–µ–Ω–±–µ–π–¥—ñ', bad: true },
          { text: '–ë”ô—Ä—ñ —Å–∞“ì–∞–Ω —Ä–∏–∑–∞', bad: false },
          { text: '–°–µ–Ω—ñ“£ –∏–¥–µ—è“£ –∫–µ—Ä–µ–º–µ—Ç', bad: false },
          { text: '–°–µ–Ω—ñ“£ –ø–æ—Å—Ç—ã“£ –Ω–∞—à–∞—Ä', bad: true }
        ]
      },
      ru: {
        description: '–≠—Ç–∞ –∏–≥—Ä–∞ –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –≥—Ä—É–±—ã–µ –∏ –¥–æ–±—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.',
        startTitle: '–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å?', startText: '–¶–µ–ª—å ‚Äî –Ω–∞–∂–∏–º–∞–π –Ω–∞ –æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω—ã–µ –∏ —É–≥—Ä–æ–∂–∞—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Å—Ç–∞–≤–ª—è–π —Ö–æ—Ä–æ—à–∏–µ.', endTitle: '–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞',
        startButton: '–ù–∞—á–∞—Ç—å –∏–≥—Ä—É ‚ñ∂', restart: '–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞ üîÅ', pause: '–ü–∞—É–∑–∞ ‚è∏', score: '–û—á–∫–∏', lives: '–ñ–∏–∑–Ω–∏', level: '–£—Ä–æ–≤–µ–Ω—å', best: '–†–µ–∫–æ—Ä–¥',
        pool: [
          { text: '–¢—ã –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–∏–π –¥—Ä—É–≥', bad: false },
          { text: '–ú–æ–ª–æ–¥–µ—Ü', bad: false },
          { text: '–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–º–æ—â—å', bad: false },
          { text: '–£ —Ç–µ–±—è –≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è', bad: false },
          { text: '–¢—ã –≥–ª—É–ø—ã–π', bad: true },
          { text: '–ù–∏–∫–æ–º—É –Ω–µ –Ω—É–∂–µ–Ω', bad: true },
          { text: '–£–¥–∞–ª—è–π –∞–∫–∫–∞—É–Ω—Ç', bad: true },
          { text: '–¢–≤–æ—ë —Ñ–æ—Ç–æ —É–∂–∞—Å–Ω–æ–µ', bad: true },
          { text: '–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Ç–≤–æ—ë –º–Ω–µ–Ω–∏–µ', bad: false },
          { text: '–¢—ã —Å–∏–ª—å–Ω—ã–π', bad: false },
          { text: '–¢–µ–±–µ –Ω–∏–∫—Ç–æ –Ω–µ –≤–µ—Ä–∏—Ç', bad: true },
          { text: '–í—Å–µ —Ç–æ–±–æ–π –¥–æ–≤–æ–ª—å–Ω—ã', bad: false },
          { text: '–¢–≤–æ—è –∏–¥–µ—è –æ—Ç–ª–∏—á–Ω–∞—è', bad: false },
          { text: '–¢–≤–æ–π –ø–æ—Å—Ç –ø–ª–æ—Ö–æ–π', bad: true }
        ]
      }
    };

    let currentLang = 'kk';
    let playerName = localStorage.getItem('cd_name') || prompt('–ê—Ç—ã“£–¥—ã –µ–Ω–≥—ñ–∑:');
    localStorage.setItem('cd_name', playerName);

    const stage = document.getElementById('stage');
    const scoreEl = document.getElementById('score');
    const livesEl = document.getElementById('lives');
    const levelEl = document.getElementById('level');
    const bestEl = document.getElementById('best');
    const startOverlay = document.getElementById('startOverlay');
    const endOverlay = document.getElementById('endOverlay');
    const summaryEl = document.getElementById('summary');
    const clickSound = document.getElementById('clickSound');
    const wrongSound = document.getElementById('wrongSound');

    let score = 0, lives = 5, level = 1, best = localStorage.getItem('cd_best') || 0;
    let spawnTimer = null, paused = false, running = false;
    bestEl.textContent = `–†–µ–∫–æ—Ä–¥: ${best}`;

    function setLang(lang) {
      currentLang = lang;
      const t = translations[lang];
      document.getElementById('description').innerText = t.description;
      document.getElementById('startTitle').innerText = t.startTitle;
      document.getElementById('startText').innerText = t.startText;
      document.getElementById('endTitle').innerText = t.endTitle;
      document.getElementById('btnStart').innerText = t.startButton;
      document.getElementById('btnAgain').innerText = t.restart;
      document.getElementById('btnRestart').innerText = t.restart;
      document.getElementById('btnPause').innerText = t.pause;
      updateUI();
    }

    function rnd(min, max) { return Math.random() * (max - min) + min; }
    function choice(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

    function getDifficulty(level) {
      const speed = Math.min(7, 5 + level * 0.3);
      const rate = Math.max(700, 1500 - level * 30);
      const badChance = Math.min(.7, .3 + level * 0.03);
      return { speed, rate, badChance };
    }

    function updateUI() {
      const t = translations[currentLang];
      scoreEl.textContent = `${t.score}: ${score}`;
      livesEl.textContent = `${t.lives}: ${lives}`;
      levelEl.textContent = `${t.level}: ${level}`;
      bestEl.textContent = `${t.best}: ${best}`;
    }

    function spawnMessage() {
      const { speed, badChance } = getDifficulty(level);
      const t = translations[currentLang];
      const pool = t.pool;
      const isBad = Math.random() < badChance;
      const item = choice(pool.filter(p => p.bad === isBad));
      const el = document.createElement('div');
      el.className = 'msg';
      el.textContent = item.text;
      el.style.left = `${rnd(10, stage.clientWidth - 200)}px`;
      el.style.animationDuration = `${rnd(speed - 0.3, speed + 1).toFixed(2)}s`;

      el.addEventListener('click', () => {
        if (isBad) { clickSound.play(); score++; if (score % 10 === 0) level++; }
        else { wrongSound.play(); lives--; }
        el.remove();
        if (lives <= 0) endGame(); else updateUI();
      });

      el.addEventListener('animationend', () => {
        if (isBad) { lives--; if (lives <= 0) endGame(); }
        el.remove(); updateUI();
      });
      stage.appendChild(el);
    }

    function startGame() {
      score = 0; lives = 5; level = 1; paused = false; running = true;
      stage.querySelectorAll('.msg').forEach(m => m.remove());
      startOverlay.style.display = 'none';
      endOverlay.style.display = 'none';
      updateUI();
      scheduleSpawn();
    }

    function scheduleSpawn() {
      clearInterval(spawnTimer);
      const { rate } = getDifficulty(level);
      spawnTimer = setInterval(() => { if (!paused) spawnMessage(); }, rate);
    }

    function saveResult() {
      let results = JSON.parse(localStorage.getItem('cd_results')) || [];
      results.push({ name: playerName, score: score, level: level, date: new Date().toLocaleString() });
      results = results.slice(-5); // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∏–≥—Ä
      localStorage.setItem('cd_results', JSON.stringify(results));
    }

    function showResults() {
      let results = JSON.parse(localStorage.getItem('cd_results')) || [];
      let html = '<h3>–°–æ“£“ì—ã –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä:</h3><ul style=\"text-align:left\">';
      results.forEach(r => {
        html += `<li>${r.name}: ${r.score} “±–ø–∞–π (–¥–µ“£–≥–µ–π ${r.level}) ‚Äî ${r.date}</li>`;
      });
      html += '</ul>';
      return html;
    }

    function endGame() {
      running = false; clearInterval(spawnTimer);
      if (score > best) { best = score; localStorage.setItem('cd_best', best); }
      saveResult();
      updateUI();
      summaryEl.innerHTML = `–°—ñ–∑–¥—ñ“£ “±–ø–∞–π—ã“£—ã–∑: <b>${score}</b> | –î–µ“£–≥–µ–π: <b>${level}</b><br><br>${showResults()}`;
      endOverlay.style.display = 'flex';
    }

    document.getElementById('btnStart').addEventListener('click', startGame);
    document.getElementById('btnAgain').addEventListener('click', startGame);
    document.getElementById('btnRestart').addEventListener('click', startGame);
    document.getElementById('btnPause').addEventListener('click', () => { paused = !paused; });

    setLang('kk');
    updateUI();
  </script>
</body>
</html>
